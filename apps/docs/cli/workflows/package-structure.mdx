---
title: "Workflow package structure"
sidebarTitle: "Package structure"
---

## Directory Layout

```
my-workflow/
├─ workflow.yaml
├─ scripts/
└─ rules/
```

The folder—called a **workflow package**—is the root when you run `npx codemod workflow run ./my-workflow/`.

<Info>
You can combine types in a single package by placing assets under the required directories (e.g., <code>scripts/</code>, <code>rules/</code>) and referencing them from <code>workflow.yaml</code>.
</Info>

<Accordion title="Workflow Package & Loading Workflows">
  A workflow package is a directory containing your `workflow.yaml` and any scripts, rules, or assets referenced by your workflow.

  - When you run

    ```bash
    npx codemod workflow run ./my-workflow/
    ```

    the directory is used as the root for all relative paths.
  - You can also run a workflow directly from a file:

    <br />

    ```bash
    npx codemod workflow run -w workflow.yaml
    ```
</Accordion>

## Workflow File

```yaml workflow.yaml
version: "1"
state:
  schema: []
templates: []
nodes: []
```

A workflow has four top-level keys:

| Key                       | Required | Purpose                                           |
| ------------------------- | -------- | ------------------------------------------------- |
| `version`                 | ✓        | Declare workflow schema version (default: `"1"`). |
| [`state`](#shared-state)  |          | Declares shared-state schema.                     |
| [`templates`](#templates) |          | Re-usable blocks.                                 |
| [`nodes`](#nodes)         | ✓        | Executable DAG.                                   |

<Tip>
See <a href="/cli/workflows/building-workflows">Building workflows</a> for a deep dive into nodes, steps, params, strategy, and examples.
</Tip>

## codemod.yaml fields

These are the fields you define when scaffolding a new codemod (based on the actual CLI template and prompts):

<ParamField path="schema_version" type="string" required default="1.0">
Codemod workflow schema version.
</ParamField>

<ParamField path="name" type="string" required>
Codemod package name (unique within scope).

Example:
- <code>remove-console-logs</code>
- Optionally, you can add organization/project scopes: <code>@scope/remove-console-logs</code>.
</ParamField>

<ParamField path="version" type="string" required default="0.1.0">
Semantic version of the package.
</ParamField>

<ParamField path="description" type="string" required>
Brief description of what the codemod does.
</ParamField>

<ParamField path="author" type="string" required>
Author name and email, e.g., <code>Jane Doe &lt;jane@example.com&gt;</code>.
</ParamField>

<ParamField path="license" type="string" required default="MIT">
License identifier (SPDX), e.g., <code>MIT</code>.
</ParamField>

<ParamField path="workflow" type="string" required default="workflow.yaml">
Relative path to your workflow file.
</ParamField>

<ParamField path="category" type="string" default="migration">
Category for the codemod.
</ParamField>

<ParamField path="targets.languages" type="string[]">
Languages targeted by this codemod (selected language during `codemod init`; editable later).
</ParamField>

<ParamField path="keywords" type="string[]">
Search keywords for discovery.

Example: `keywords: ["transformation", "migration"]`
</ParamField>

<ParamField path="registry.access" type="string" default="public">
Access controls who can run/use the codemod (once they can see it).

- <strong>public</strong>: Anyone can run the codemod.
- <strong>private</strong>: Only the owner can run the codemod.
- <strong>pro</strong>: Only Pro plan users can run the codemod.

<Tip>
Access applies on top of visibility. For example, <code>visibility: public</code> with <code>access: pro</code> shows the package publicly, but only Pro users can run it.
</Tip>
</ParamField>

<ParamField path="registry.visibility" type="string" default="public">
Visibility controls who can see the package in the Registry (search, listings, and UI).

- <strong>public</strong>: Everyone can see the package in the Registry.
- <strong>private</strong>: Only the owner can see the package.
- <strong>org</strong>: Members of the package's organization scope can see the package.
- <strong>user</strong>: Visible only to the publishing user (user-scoped visibility).

<Info>
During scaffolding, the CLI sets <code>public</code>/<code>private</code> based on <code>--private</code>. You can change to any supported value above when publishing.
</Info>
</ParamField>

### Example

```yaml codemod.yaml
schema_version: "1.0"

name: "my-awesome-codemod"
version: "0.1.0"
description: "Transform legacy patterns to modern syntax"
author: "Your Name <you@example.com>"
license: "MIT"
workflow: "workflow.yaml"
category: "migration"

targets:
  languages: ["typescript"]

keywords: ["transformation", "migration"]

registry:
  access: "public"
  visibility: "public"
```
