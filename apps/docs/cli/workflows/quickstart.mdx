---
title: "Quickstart"
description: "Create your first codemod workflow project and run it locally."
---

import { CLIDemo } from "/snippets/cli-demo.mdx";

<Frame>
    <CLIDemo />
</Frame>

<Steps>
  <Step title="Create a new codemod project">
    ```bash
    npx codemod init
    ```

    When creating a new codemod project, you'll be prompted for:

    - **Project directory**
    - **Codemod type:**
      - Shell command workflow codemod
      - JavaScript ast-grep codemod
      - YAML ast-grep codemod
    - **Project name**
    - **Description**
    - **Author**
    - **License type**
    - **If your codemod is private**

    This creates a new folder with the required files and structure.
  </Step>

  <Step title="Explore the generated project">
    The generated project structure will differ depending on the codemod type you select:

    <CodeGroup>

    ```plaintext Shell Command Workflow
    example-codemod/
    ├── .gitignore
    ├── README.md
    ├── codemod.yaml       # Codemod package manifest and metadata
    ├── workflow.yaml      # Workflow definition for running the codemod
    ├── scripts/
    │   ├── setup.sh       # Script to set up environment
    │   ├── transform.sh   # Script to apply code transformations
    │   └── cleanup.sh     # Script to clean up after transformation
    ```

    ```plaintext JavaScript ast-grep Workflow
    example-codemod/
    ├── .gitignore
    ├── README.md
    ├── codemod.yaml       # Codemod package manifest and metadata
    ├── workflow.yaml      # Workflow definition for running the codemod
    ├── package.json
    ├── tsconfig.json
    ├── scripts/
    │   └── codemod.ts     # Example JS/TS codemod entry point
    └── tests/
        └── fixtures/
            ├── input.js   # Input fixture for codemod test
            └── expected.js# Expected output after codemod
    ```

    ```plaintext YAML ast-grep Workflow
    example-codemod/
    ├── .gitignore
    ├── README.md
    ├── codemod.yaml       # Codemod package manifest and metadata
    ├── workflow.yaml      # Workflow definition for running the codemod
    ├── rules/
    │   └── config.yml     # Example ast-grep rule
    └── tests/
        ├── input/
        └── expected/
    ```

    </CodeGroup>

    <Info>
      You can combine different codemod types in a single package by placing each type under its required directory (e.g., <code>scripts/</code> for shell scripts, <code>rules/</code> for ast-grep rules) and referencing them from <code>workflow.yaml</code>.
    </Info>
  </Step>

  <Step title="Understand an example workflow">
    The generated <code>workflow.yaml</code> will differ depending on the codemod type you select:

    <CodeGroup>

    ```yaml Shell Command Workflow
    version: "1"
    nodes:
      - id: setup
        name: Setup Environment
        type: automatic
        steps:
          - id: init
            name: Initialize
            run: ./scripts/setup.sh

      - id: transform
        name: Apply Transformations
        type: automatic
        depends_on: [setup]
        steps:
          - id: apply
            name: Apply Changes
            run: ./scripts/transform.sh

      - id: cleanup
        name: Cleanup
        type: automatic
        depends_on: [transform]
        steps:
          - id: clean
            name: Clean temporary files
            run: ./scripts/cleanup.sh
    ```

    ```yaml JavaScript ast-grep Workflow
    version: "1"
    nodes:
      - id: install-deps
        name: Install Dependencies
        type: automatic
        runtime:
          type: direct
        steps:
          - id: npm-install
            name: Install npm packages
            run: npm install

      - id: apply-transforms
        name: Apply AST Transformations
        type: automatic
        depends_on: [install-deps]
        runtime:
          type: direct
        steps:
          - name: "Remove console.log statements"
            js-ast-grep:
              js_file: "scripts/codemod.ts"
              base_path: "."
              include:
                - "**/*.ts"
                - "**/*.tsx"
              exclude:
                - "**/node_modules/**"
              language: "typescript"
    ```

    ```yaml YAML ast-grep Workflow
    version: "1"
    nodes:
      - id: apply-rules
        name: Apply AST-grep Rules
        steps:
          - name: "Scan TypeScript files only"
            ast-grep:
              include:
                - "**/*.ts"
                - "**/*.tsx"
              exclude:
                - "**/*.test.ts"
                - "**/*.spec.ts"
              base_path: "src"
              config_file: "rules/config.yml"
    ```

    </CodeGroup>
  </Step>

  <Step title="Validate & run your workflow">
    ```bash
    npx codemod workflow validate -w workflow.yaml
    npx codemod workflow run -w workflow.yaml
    ```

    This will check your workflow for errors and then run it locally.

    <Info>
      The <code>workflow validate</code> command checks syntax and schema compliance, but not logical correctness. Always test with real data to ensure expected behavior.
    </Info>
  </Step>
</Steps>


